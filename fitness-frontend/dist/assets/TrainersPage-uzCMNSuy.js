import{j as e}from"./ui-D95r1dMF.js";import{r as s}from"./vendor-iz3JPVmO.js";import{a as l,A as a,s as r}from"./index-CoDTQVyW.js";import"./utils-CCtIn9I6.js";import"./router-D8KzWLZn.js";function t(){const[t,i]=s.useState([]),[n,o]=s.useState(!1),[d,c]=s.useState(null),[m,x]=s.useState(!1),[h,g]=s.useState({trainer_id:"",first_name:"",last_name:"",email:"",phone:"",monthly_salary:"",specialization:"",start_date:"",image:null}),[u,p]=s.useState(new Set),b=e=>{if(!e.image)return"/images/trainer1.png";if(e.image.startsWith("http"))return e.image;return`${"https://your-production-domain.com/api/".replace("/api","")}${e.image}`};s.useEffect((()=>{y()}),[]);const y=async()=>{o(!0),c(null);try{const e=localStorage.getItem("admin_access_token"),s=await l.get("trainers/",{headers:{Authorization:`Bearer ${e}`},timeout:1e4});let a=s.data.results||s.data;a=Array.isArray(a)?a:[];const r=a.map((e=>({...e})));i(r)}catch(e){let s="Failed to load trainers. ";e.response?s+=`Server error: ${e.response.status}`:e.request?s+="No response from server. Check network connection.":s+=e.message,c(s)}finally{o(!1)}},f=e=>{const{name:s,value:l}=e.target;g((e=>({...e,[s]:l})))},j=async e=>{if(window.confirm("Are you sure you want to delete this trainer?"))try{const s=localStorage.getItem("admin_access_token");await l.delete(`trainers/${e}/`,{headers:{Authorization:`Bearer ${s}`}}),i(t.filter((s=>s.id!==e))),r.success("Trainer deleted successfully!")}catch(s){r.error("Failed to delete trainer. They might be associated with training sessions.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-800 via-gray-800 to-black p-2 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Trainers Management"}),e.jsx("div",{className:"w-24 h-1 bg-yellow-500 mx-auto rounded-full"}),e.jsx("p",{className:"text-gray-300 mt-4",children:"Manage your fitness trainers and their profiles"})]}),d&&e.jsxs("div",{className:"mb-6 p-4 bg-red-900/30 text-red-300 rounded-xl border border-red-500/50",children:[e.jsx("p",{className:"font-semibold",children:"Error"}),e.jsx("p",{className:"text-sm whitespace-pre-line",children:d})]}),m&&e.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-xl border border-gray-700 mb-8 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-black",children:"Add New Trainer"}),e.jsx("button",{onClick:()=>x(!1),className:"text-black hover:text-gray-700 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o(!0),c(null);const s=["trainer_id","first_name","last_name","email","phone","monthly_salary","specialization","start_date"].filter((e=>!h[e]));if(s.length>0)return c(`Missing required fields: ${s.join(", ")}`),void o(!1);try{const e=localStorage.getItem("admin_access_token"),s=new FormData;Object.keys(h).forEach((e=>{("image"===e&&h[e]||"image"!==e)&&s.append(e,h[e])}));await l.post("trainers/",s,{headers:{Authorization:`Bearer ${e}`},timeout:1e4});g({trainer_id:"",first_name:"",last_name:"",email:"",phone:"",monthly_salary:"",specialization:"",start_date:"",image:null}),x(!1),y(),r.success("Trainer added successfully!")}catch(a){let e="Failed to add trainer: ";if(a.response)if(a.response.data&&"object"==typeof a.response.data){e+=Object.entries(a.response.data).map((([e,s])=>`${e}: ${Array.isArray(s)?s.join(", "):s}`)).join("\n")}else"string"==typeof a.response.data?e+=a.response.data:e+=`Server error: ${a.response.status}`;else a.request?e+="No response from server. Check network connection.":e+=a.message;c(e)}finally{o(!1)}},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Trainer ID"}),e.jsx("input",{type:"text",name:"trainer_id",value:h.trainer_id,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white placeholder-gray-400 transition-all",placeholder:"Enter trainer ID",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Specialization"}),e.jsxs("select",{name:"specialization",value:h.specialization,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white transition-all",required:!0,children:[e.jsx("option",{value:"",children:"Select specialization"}),[{value:"fitness",label:"Fitness"},{value:"yoga",label:"Yoga"},{value:"cardio",label:"Cardio"},{value:"strength",label:"Strength Training"},{value:"nutrition",label:"Nutrition"}].map((s=>e.jsx("option",{value:s.value,children:s.label},s.value)))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"First Name"}),e.jsx("input",{type:"text",name:"first_name",value:h.first_name,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white placeholder-gray-400 transition-all",placeholder:"Enter first name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Last Name"}),e.jsx("input",{type:"text",name:"last_name",value:h.last_name,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white placeholder-gray-400 transition-all",placeholder:"Enter last name",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white placeholder-gray-400 transition-all",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white placeholder-gray-400 transition-all",placeholder:"Enter phone number",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Monthly Salary"}),e.jsx("input",{type:"number",name:"monthly_salary",value:h.monthly_salary,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white placeholder-gray-400 transition-all",placeholder:"Enter monthly salary",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",value:h.start_date,onChange:f,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Profile Image"}),e.jsx("input",{type:"file",name:"image",onChange:e=>{const s=e.target.files[0];g((e=>({...e,image:s})))},accept:"image/*",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-600 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-200 bg-gray-700 text-white transition-all file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-yellow-500 file:text-black hover:file:bg-yellow-400"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-3 border-2 border-gray-600 text-white rounded-lg hover:bg-gray-600 transition-all font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black rounded-lg hover:from-yellow-600 hover:to-yellow-700 transition-all font-semibold shadow-lg disabled:opacity-50",children:n?"Adding...":"Add Trainer"})]})]})})]}),e.jsxs("div",{className:"bg-gray-700 rounded-2xl shadow-xl border border-gray-600 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 px-6 py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-black mb-2 md:mb-0",children:"Trainers List"}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>x(!0),className:"bg-black text-yellow-500 py-2 px-6 rounded-lg hover:bg-gray-800 transition-all font-semibold shadow-lg w-full sm:w-auto",disabled:m,children:"Add New Trainer"}),e.jsx("button",{onClick:y,className:"bg-gray-800 text-white py-2 px-6 rounded-lg hover:bg-gray-900 transition-all font-semibold shadow-lg w-full sm:w-auto",disabled:n,children:n?"Refreshing...":"Refresh"})]})]})}),e.jsx("div",{className:"p-6",children:n?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-yellow-500 border-t-transparent"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.length>0?t.map((s=>e.jsxs("div",{className:"bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl shadow-lg border border-gray-500 overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"relative h-48",children:[u.has(s.id)?e.jsx("div",{className:"h-full w-full bg-gradient-to-br from-gray-600 to-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-400 text-4xl",children:"👤"})}):e.jsx("img",{src:b(s),alt:`${s.first_name} ${s.last_name}`,className:"h-full w-full object-cover",onError:()=>{return e=s.id,void p((s=>new Set([...s,e])));var e}}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("span",{className:"bg-yellow-500 text-black px-3 py-1 rounded-full text-xs font-bold",children:["ID: ",s.trainer_id]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-2",children:[s.first_name," ",s.last_name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Specialization:"}),e.jsx("span",{className:"ml-1 font-semibold text-white capitalize",children:s.specialization})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Email:"}),e.jsx("span",{className:"ml-1 font-semibold text-white",children:s.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Phone:"}),e.jsx("span",{className:"ml-1 font-semibold text-white",children:s.phone})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Salary:"}),e.jsxs("span",{className:"ml-1 font-semibold text-white",children:["$",s.monthly_salary]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-500",children:e.jsx("button",{onClick:()=>j(s.id),className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-2 px-4 rounded-lg hover:from-red-600 hover:to-red-700 transition-all font-semibold",children:"Delete Trainer"})})]})]},s.id))):e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("div",{className:"text-4xl text-yellow-400 mb-2",children:"👥"}),e.jsx("p",{className:"text-gray-300",children:"No trainers found"})]})}),e.jsx("div",{className:"md:hidden space-y-4",children:t.length>0?t.map((s=>e.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-600 rounded-xl shadow-lg border border-gray-500 overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h3",{className:"font-bold text-lg text-white",children:[s.first_name," ",s.last_name]}),e.jsx("button",{onClick:()=>j(s.id),className:"text-red-400 hover:text-red-300 font-semibold text-sm",children:"Delete"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-300",children:"ID:"}),e.jsx("span",{className:"ml-1 font-semibold text-white",children:s.trainer_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-300",children:"Specialization:"}),e.jsx("span",{className:"ml-1 font-semibold text-white capitalize",children:s.specialization})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-300",children:"Email:"}),e.jsx("span",{className:"ml-1 font-semibold text-white",children:s.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-300",children:"Phone:"}),e.jsx("span",{className:"ml-1 font-semibold text-white",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-300",children:"Salary:"}),e.jsxs("span",{className:"ml-1 font-semibold text-white",children:["$",s.monthly_salary]})]})]})]})},s.id))):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl text-yellow-400 mb-2",children:"👥"}),e.jsx("p",{className:"text-gray-300",children:"No trainers found"})]})})]})})]})]})}),e.jsx(a,{})]})}export{t as default};
